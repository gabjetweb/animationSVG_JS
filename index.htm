<!DOCTYPE html>
<html>
<head>
	<title>Tracer d'une figure SVG par l'événement scroll</title>
	<link rel="stylesheet" type="text/css" href="less/style.css">
</head>

<body>



<svg 	id="monSVG" 

		width="1000" 

		height="500"

		viewBox="-50 -50 1000 500"

		preserveAspectRatio="xMidYMid slice"

		>

 <!--  Le path d'un triangle -->

  <path d=" M 150 0
  			L 225 200 
  			L 75 200 
  			Z"/>

  <path d=" M 225 200
  			L 150 0 
  			L 300 0 
  			Z"/>

  <path d=" M 300 0
  			L 225 200 
  			L 375 200 
  			Z"/>

    <path d="M 375 200
  			L 450 0 
  			L 300 0 
  			Z"/>

     <path d="M 450 0
  			L 375 200 
  			L 525 200
  			Z"/>

  	<path d="M 75 100 
  			 L 75 100
  			 L 262 100
  			 Z" />

  	<path d="M 525 100 
  			 L 525 100
  			 L 338 100
  			 Z" />

  	 <path d="M 150, 100
       		  m -75, 0
        	  a 75,75 0 1,0 150,0
        	  a 75,75 0 1,0 -150,0" />

  	 <path d="M 450, 100
       		  m -75, 0
        	  a 75,75 0 1,0 150,0
        	  a 75,75 0 1,0 -150,0" />
</svg>


<script type="text/javascript">


	// on cible l'élément « path » que l'on veut animer 
	var triangles = document.querySelectorAll("#monSVG path");

	console.log(triangles.length);

	for (var i = triangles.length - 1; i >= 0; i--) {
	
			// la longueur du chemin «path»
			var longueur = triangles[i].getTotalLength();

			console.log(longueur)

			// La longueur du tracé
			// https://developer.mozilla.org/en/docs/Web/SVG/Attribute/stroke-dasharray

			triangles[i].style.strokeDasharray = longueur;

			// On fait disparaître le tracé en appliquant la propriété css strokeDashoffset sur toute la longueur du chemin
			triangles[i].style.strokeDashoffset = longueur;
		}

			// extraire la fraction du déplacement de la barre de défilement et  ajusté le tracé
			window.addEventListener("scroll", maTrace);

			function maTrace() {

				console.log('scrollTop de body = ' + document.body.scrollTop)
				console.log('scrollTop de documentElement = ' + document.documentElement.scrollTop)
				console.log('scrollHeight de documentElement = ' + document.documentElement.scrollHeight)	
				console.log('clientHeight de documentElement = ' + document.documentElement.clientHeight)			

			  https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight

			  var fractionDuScroll = (document.body.scrollTop + document.documentElement.scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);

			  var trace = longueur * fractionDuScroll;

			for (var i = triangles.length - 1; i >= 0; i--) {
			  // tracé selon la fraction de «scroll»
			  triangles[i].style.strokeDashoffset = longueur - trace ;
			}
			  }


</script>

</body>
</html>