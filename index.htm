<!DOCTYPE html>
<html>
<head>
	<title>Tracer d'une figure SVG par l'événement scroll</title>
	<link rel="stylesheet" type="text/css" href="less/style.css">
</head>

<body>



<svg 	id="monSVG" 

		width="1000" 

		height="500"

		viewBox="-50 -50 1000 500"

		preserveAspectRatio="xMidYMid slice"

		>

 <!--  Le path d'un triangle -->

  <path d=" M 150 0
  			L 75 200 
  			L 225 200 
  			Z"/>

  <path d=" M 225 200
  			L 150 0 
  			L 300 0 
  			Z"/>

  <path d=" M 300 0
  			L 225 200 
  			L 375 200 
  			Z"/>

    <path d="M 375 200
  			L 300 0 
  			L 450 0 
  			Z"/>

     <path d="M 450 0
  			L 375 200 
  			L 525 200
  			Z"/>
</svg>


<script type="text/javascript">
	
	// on cible l'élément « path » que l'on veut animer 
	var triangle = document.querySelectorAll("#monSVG path")[0];
	var triangle2 = document.querySelectorAll("#monSVG path")[1];
	var triangle3 = document.querySelectorAll("#monSVG path")[2];
	var triangle4 = document.querySelectorAll("#monSVG path")[3];
	var triangle5 = document.querySelectorAll("#monSVG path")[4];

	// la longueur du chemin «path»
	var longueur = triangle.getTotalLength();
	var longueur2 = triangle2.getTotalLength();
	var longueur3 = triangle3.getTotalLength();
	var longueur4 = triangle4.getTotalLength();
	var longueur5 = triangle5.getTotalLength();

	console.log(longueur)

	// La longueur du tracé
	// https://developer.mozilla.org/en/docs/Web/SVG/Attribute/stroke-dasharray

	triangle.style.strokeDasharray = longueur;
	triangle2.style.strokeDasharray = longueur2;
	triangle3.style.strokeDasharray = longueur3;
	triangle4.style.strokeDasharray = longueur4;
	triangle5.style.strokeDasharray = longueur5;

	// On fait disparaître le tracé en appliquant la propriété css strokeDashoffset sur toute la longueur du chemin
	triangle.style.strokeDashoffset = longueur;
	triangle2.style.strokeDashoffset = longueur2;
	triangle3.style.strokeDashoffset = longueur3;
	triangle4.style.strokeDashoffset = longueur4;
	triangle5.style.strokeDashoffset = longueur5;

	// extraire la fraction du déplacement de la barre de défilement et  ajusté le tracé
	window.addEventListener("scroll", maTrace);

	function maTrace() {

		console.log('scrollTop de body = ' + document.body.scrollTop)
		console.log('scrollTop de documentElement = ' + document.documentElement.scrollTop)
		console.log('scrollHeight de documentElement = ' + document.documentElement.scrollHeight)	
		console.log('clientHeight de documentElement = ' + document.documentElement.clientHeight)			

https://developer.mozilla.org/en-US/docs/Web/API/Element/clientHeight



	  var fractionDuScroll = (document.body.scrollTop + document.documentElement.scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);

	  var trace = longueur * fractionDuScroll;
	  var trace2 = longueur2 * fractionDuScroll;
	  var trace3 = longueur3 * fractionDuScroll;
	  var trace4 = longueur4 * fractionDuScroll;
	  var trace5 = longueur5 * fractionDuScroll;

	  // tracé selon la fraction de «scroll»
	  triangle.style.strokeDashoffset = longueur - trace ;
	  triangle2.style.strokeDashoffset = longueur2 - trace2;
	  triangle3.style.strokeDashoffset = longueur3 - trace3;
	  triangle4.style.strokeDashoffset = longueur4 - trace4;
	  triangle5.style.strokeDashoffset = longueur5 - trace5;
	}
</script>

</body>
</html>